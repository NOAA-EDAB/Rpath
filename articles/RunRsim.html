<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Run a dynamic food web simulation in Rsim • Rpath</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run a dynamic food web simulation in Rsim">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Rpath</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/Rpath.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/ecosense.html">Generating an Rsim ensemble with Ecosense</a></li>
    <li><a class="dropdown-item" href="../articles/ModelSetup.html">Set up a food web model</a></li>
    <li><a class="dropdown-item" href="../articles/RunRpath.html">Create a static food web model in Rpath</a></li>
    <li><a class="dropdown-item" href="../articles/RunRsim.html">Run a dynamic food web simulation in Rsim</a></li>
    <li><a class="dropdown-item" href="../articles/UnitTests.html">Unit Tests</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NOAA-EDAB/Rpath/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Run a dynamic food web simulation in Rsim</h1>
                        <h4 data-toc-skip class="author">Sean M.
Lucey</h4>
            
            <h4 data-toc-skip class="date">2025-01-31</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/NOAA-EDAB/Rpath/blob/master/vignettes/RunRsim.Rmd" class="external-link"><code>vignettes/RunRsim.Rmd</code></a></small>
      <div class="d-none name"><code>RunRsim.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="running-rsim">Running rsim<a class="anchor" aria-label="anchor" href="#running-rsim"></a>
</h2>
<p>Rsim is the ecosim implementation of the EwE code in R. In order to
proceed you must have a valid Rpath object. The steps for setting this
up are described in the vignette “Rpath using R Ecosystem”.</p>
<p>Running rsim, is a three part process. First, the function
<code>rsim.scenario</code> is run to convert rpath parameters to rates.
Within <code>rsim.scenario</code> are 5 functions that initialize the
basic and stanza parameters, creates perturbation matrices for fishing
and other forcing functions, and a list of initial states. Arguments
passed to the <code>rsim.scenario</code> function are the Rpath object,
the rpath parameter object, and a vector of years corresponding to the
length of the simulation.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">REco.sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rsim.scenario.html">rsim.scenario</a></span><span class="op">(</span><span class="va">REco</span>, <span class="va">REco.params</span>, years <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p>The second part of rsim is to add forcing functions or change the
fishing behavior. This is accomplished by changing the appropriate list
within the Rsim.scenario object created in the first step. There are a
series of adjust functions that will do this without having to know the
specific group numbers. For example, we can double the effort of the
trawler fleet after 25 years using the <code>adjust.fishing</code>
function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">REco.sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adjust.fishing.html">adjust.fishing</a></span><span class="op">(</span><span class="va">REco.sim</span>, <span class="st">'ForcedEffort'</span>, group <span class="op">=</span> <span class="st">'Trawlers'</span>, sim.year <span class="op">=</span> <span class="fl">25</span><span class="op">:</span><span class="fl">100</span>, </span>
<span>                           value <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>The final part is to apply the modified Rsim.scenario function to the
<code>rsim.run</code> function. The only arguments to the
<code>rsim.run</code> function are the Rsim.scenario object, the method
for numerical integration, and the length of the simulation. Rpath
allows for both Adams-Bashforth and Runge-Kutta 4 numerical integration.
Older versions of EwE use the Adams-Bashforth method while the latest
version (6+) uses Runge-Kutta (The default method for Rpath).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">REco.run1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rsim.run.html">rsim.run</a></span><span class="op">(</span><span class="va">REco.sim</span>, method <span class="op">=</span> <span class="st">'RK4'</span>, years <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p>The output from <code>rsim.run</code> is another S3 object class
called ‘Rsim.output’. Similar to the Rpath object created by
<code>rpath</code>, the generic function <code>print</code> will give
output similar to the ‘Ecosim results’ tab in EwE. If you want to save
the <code>print</code> results you need to use the function
<code>write.rpath.sim</code>. The function <code>summary</code> just
like for the Rpath object will display what other list items are
available.</p>
<p>Add code for rsim print…</p>
<p>In addition, there is a quick graphical routine for plotting biomass
trajectories over time. Other plots similar to the group plots are
possible but at this time we do not have a built-in function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rsim.plot.html">rsim.plot</a></span><span class="op">(</span><span class="va">REco.run1</span>, <span class="va">groups</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">22</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="RunRsim_files/figure-html/ecosimEquilibriumPlot-1.png" width="864"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kerim Aydin, Sean Lucey, Sarah Gaichas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
